<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajay – Smart Notepad</title>
    <meta name="description" content="A smart, fast, and accessible digital notepad for writing, organizing, and managing your thoughts with ease.">
    <style>
        :root {
            --bg-color: #f0f2f5;
            --text-color: #333;
            --primary-color: #4CAF50;
            --primary-dark-color: #388E3C;
            --secondary-color: #007bff;
            --secondary-dark-color: #0056b3;
            --card-bg: #ffffff;
            --border-color: #ddd;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --input-bg: #f8f8f8;
            --input-border: #ccc;
            --button-text-color: #fff;
            --delete-color: #dc3545;
            --delete-dark-color: #c82333;
            --go-back-color: #6c757d;
            --go-back-dark-color: #545b62;
            --heading-color: #2c3e50;
            --slogan-color: #555;
            --description-color: #666;
            --link-color: #007bff;
            --icon-color: #666;
        }

        [data-theme="dark"] {
            --bg-color: #2c3e50;
            --text-color: #ecf0f1;
            --primary-color: #2ecc71;
            --primary-dark-color: #27ae60;
            --secondary-color: #3498db;
            --secondary-dark-color: #2980b9;
            --card-bg: #34495e;
            --border-color: #444;
            --shadow-color: rgba(0, 0, 0, 0.4);
            --input-bg: #405466;
            --input-border: #555;
            --button-text-color: #fff;
            --delete-color: #e74c3c;
            --delete-dark-color: #c0392b;
            --go-back-color: #7f8c8d;
            --go-back-dark-color: #95a5a6;
            --heading-color: #ecf0f1;
            --slogan-color: #bdc3c7;
            --description-color: #aeb6bf;
            --link-color: #3498db;
            --icon-color: #ecf0f1;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 10px 30px var(--shadow-color);
            padding: 30px;
            text-align: center;
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        header {
            margin-bottom: 25px;
            position: relative;
        }

        .theme-switch-wrapper {
            position: absolute;
            top: 0;
            right: 0;
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 8px;
            background-color: var(--input-bg);
            box-shadow: 0 2px 5px var(--shadow-color);
        }

        .theme-switch {
            display: inline-block;
            height: 24px;
            position: relative;
            width: 48px;
        }

        .theme-switch input {
            display: none;
        }

        .slider {
            background-color: #ccc;
            bottom: 0;
            cursor: pointer;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            background-color: #fff;
            bottom: 2px;
            content: "";
            height: 20px;
            left: 2px;
            position: absolute;
            width: 20px;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:checked + .slider:before {
            transform: translateX(24px);
        }

        .slider.round {
            border-radius: 24px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        h1 {
            font-size: 2.8em;
            color: var(--heading-color);
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px var(--shadow-color);
            letter-spacing: 0.05em;
        }

        .slogan {
            font-style: italic;
            color: var(--slogan-color);
            margin-bottom: 15px;
            font-size: 1.1em;
            opacity: 0.9;
        }

        .description {
            font-size: 1em;
            color: var(--description-color);
            margin-bottom: 20px;
        }

        .credits {
            font-size: 0.9em;
            color: var(--description-color);
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px dashed var(--border-color);
        }

        .credits strong {
            color: var(--text-color);
        }

        .view-section {
            display: none;
            width: 100%;
            text-align: left;
            padding: 20px 0;
        }

        .view-section.active {
            display: block;
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            background-color: var(--primary-color);
            color: var(--button-text-color);
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 15px var(--shadow-color);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn:hover {
            background-color: var(--primary-dark-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px var(--shadow-color);
        }

        .btn-secondary {
            background-color: var(--secondary-color);
        }

        .btn-secondary:hover {
            background-color: var(--secondary-dark-color);
        }

        .btn-delete {
            background-color: var(--delete-color);
        }

        .btn-delete:hover {
            background-color: var(--delete-dark-color);
        }

        .btn-go-back {
            background-color: var(--go-back-color);
            margin-top: 20px;
        }

        .btn-go-back:hover {
            background-color: var(--go-back-dark-color);
        }

        .form-group {
            margin-bottom: 18px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--text-color);
            font-size: 0.95em;
        }

        .form-group input[type="text"],
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--input-border);
            border-radius: 6px;
            font-size: 1em;
            background-color: var(--input-bg);
            color: var(--text-color);
            box-shadow: inset 0 1px 3px var(--shadow-color);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .form-group input[type="text"]:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
            outline: none;
        }

        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }

        .category-creation-group {
            display: flex;
            gap: 10px;
            align-items: flex-end;
            margin-top: 15px;
        }

        .category-creation-group input {
            flex-grow: 1;
        }

        .category-creation-group .btn {
            padding: 10px 15px;
            font-size: 0.9em;
            white-space: nowrap;
            box-shadow: none;
        }

        .note-list {
            list-style: none;
            padding: 0;
            margin-top: 20px;
            display: grid;
            gap: 15px;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        }

        .note-list-item {
            background-color: var(--input-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px 20px;
            cursor: pointer;
            box-shadow: 0 2px 10px var(--shadow-color);
            transition: transform 0.2s ease, box-shadow 0.3s ease, background-color 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: 8px;
            text-align: left;
            position: relative;
        }

        .note-list-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px var(--shadow-color);
            background-color: var(--border-color);
        }

        .note-list-item h3 {
            font-size: 1.4em;
            margin-bottom: 5px;
            color: var(--heading-color);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .note-list-item p {
            font-size: 0.9em;
            color: var(--slogan-color);
            margin-bottom: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .note-list-item .note-date, .note-list-item .note-category {
            font-size: 0.8em;
            color: var(--description-color);
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .note-display {
            background-color: var(--input-bg);
            border: 1px solid var(--input-border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 150px;
            text-align: left;
            word-wrap: break-word;
            white-space: pre-wrap;
            box-shadow: inset 0 1px 3px var(--shadow-color);
            line-height: 1.8;
            font-size: 1.1em;
            color: var(--text-color);
        }

        .note-details h2 {
            font-size: 2em;
            color: var(--heading-color);
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .note-details p {
            margin-bottom: 10px;
        }

        .note-details .info-label {
            font-weight: bold;
            color: var(--slogan-color);
            font-size: 0.9em;
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
        }

        .note-details .info-value {
            font-size: 1em;
            color: var(--text-color);
            background-color: var(--border-color);
            padding: 8px 12px;
            border-radius: 5px;
            display: inline-block;
            margin-bottom: 10px;
        }

        .note-actions-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .note-actions-group .btn {
            padding: 12px 15px;
            font-size: 0.9em;
        }

        .action-message {
            margin-top: 15px;
            font-size: 0.9em;
            color: var(--primary-dark-color);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            .container {
                padding: 20px;
            }

            h1 {
                font-size: 2.2em;
            }

            .slogan {
                font-size: 1em;
            }

            .description {
                font-size: 0.9em;
            }

            .btn {
                padding: 12px 20px;
                font-size: 1em;
            }

            .theme-switch-wrapper {
                top: -5px;
                right: -5px;
                transform: scale(0.9);
                padding: 8px;
            }

            .note-list {
                grid-template-columns: 1fr;
            }

            .note-actions-group {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.8em;
            }
            .slogan {
                font-size: 0.9em;
            }
            .description {
                font-size: 0.85em;
            }
            .btn {
                font-size: 0.95em;
                padding: 10px 15px;
            }
            .form-group label {
                font-size: 0.9em;
            }
            .form-group input, .form-group textarea, .form-group select {
                font-size: 0.9em;
                padding: 10px;
            }
            .note-list-item h3 {
                font-size: 1.2em;
            }
            .note-list-item p {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body data-theme="light">
    <div class="container">
        <header>
            <div class="theme-switch-wrapper">
                <label class="theme-switch" for="checkbox">
                    <input type="checkbox" id="checkbox" />
                    <div class="slider round"></div>
                </label>
            </div>
            <h1>Ajay – Smart Notepad</h1>
            <p class="slogan">“Realizing Dreams Through the Touch of Technology”</p>
            <p class="description">A smart, fast, and accessible digital notepad for writing, organizing, and managing your thoughts with ease.</p>
        </header>

        <div id="home-view" class="view-section active">
            <div class="button-group">
                <button class="btn" id="create-note-btn">Create a New Note</button>
                <button class="btn btn-secondary" id="manage-notes-btn">Manage Your Notes</button>
            </div>
        </div>

        <div id="create-note-view" class="view-section">
            <h2>Create New Note</h2>
            <div class="form-group">
                <label for="note-title">Note Title</label>
                <input type="text" id="note-title" placeholder="Enter note title" maxlength="100">
            </div>
            <div class="form-group">
                <label for="note-content">Note Content</label>
                <textarea id="note-content" placeholder="Start writing your thoughts here..."></textarea>
            </div>
            <div class="form-group">
                <label for="note-category">Note Category</label>
                <select id="note-category">
                    <option value="">Select a category</option>
                </select>
            </div>
            <div class="category-creation-group">
                <input type="text" id="new-category-input" placeholder="Enter new category name (optional)">
                <button class="btn btn-secondary" id="create-new-category-btn">Add Category</button>
            </div>
            <div class="button-group">
                <button class="btn" id="save-note-btn">Save Note</button>
                <button class="btn btn-go-back" data-target-view="home-view">Go Back</button>
            </div>
        </div>

        <div id="manage-notes-view" class="view-section">
            <h2>Your Notes</h2>
            <ul id="notes-list" class="note-list">
            </ul>
            <p id="no-notes-message" style="display:none; color: var(--slogan-color); margin-top: 20px;">You don't have any notes yet. Create one!</p>
            <button class="btn btn-go-back" data-target-view="home-view">Go Back</button>
        </div>

        <div id="note-details-view" class="view-section">
            <h2 id="detail-note-title"></h2>
            <span class="info-label">Category:</span> <span id="detail-note-category" class="info-value"></span>
            <span class="info-label">Last Updated:</span> <span id="detail-note-date" class="info-value"></span>
            <div id="detail-note-content" class="note-display"></div>
            <div class="note-actions-group">
                <button class="btn" id="edit-note-btn">Edit Note</button>
                <button class="btn btn-secondary" id="copy-note-btn">Copy</button>
                <button class="btn btn-secondary" id="share-note-btn">Share</button>
                <button class="btn btn-secondary" id="download-note-btn">Download as Text</button>
                <button class="btn btn-delete" id="delete-note-btn">Delete</button>
            </div>
            <button class="btn btn-go-back" data-target-view="manage-notes-view">Go Back</button>
        </div>

        <div id="edit-note-view" class="view-section">
            <h2>Edit Note</h2>
            <div class="form-group">
                <label for="edit-note-title">Note Title</label>
                <input type="text" id="edit-note-title" placeholder="Enter note title">
            </div>
            <div class="form-group">
                <label for="edit-note-content">Note Content</label>
                <textarea id="edit-note-content" placeholder="Edit your thoughts here..."></textarea>
            </div>
            <div class="form-group">
                <label for="edit-note-category">Note Category</label>
                <select id="edit-note-category">
                    <option value="">Select a category</option>
                </select>
            </div>
            <div class="button-group">
                <button class="btn" id="update-note-btn">Save Changes</button>
                <button class="btn btn-go-back" data-target-view="note-details-view">Go Back</button>
            </div>
        </div>

        <footer class="credits">
            Developer Credit: <strong>Ajay Thakur</strong> and <strong>S M Ripon</strong><br>
            Community & Team Credit: Accessible Resource
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const views = {
                home: document.getElementById('home-view'),
                createNote: document.getElementById('create-note-view'),
                manageNotes: document.getElementById('manage-notes-view'),
                noteDetails: document.getElementById('note-details-view'),
                editNote: document.getElementById('edit-note-view'),
            };

            let notes = JSON.parse(localStorage.getItem('ajaySmartNotes')) || [];
            let categories = JSON.parse(localStorage.getItem('ajaySmartCategories')) || ['General', 'Work', 'Personal'];
            let currentNoteId = null;

            const themeToggle = document.getElementById('checkbox');
            const body = document.body;

            function loadTheme() {
                const savedTheme = localStorage.getItem('ajaySmartTheme') || 'light';
                body.setAttribute('data-theme', savedTheme);
                themeToggle.checked = (savedTheme === 'dark');
            }

            themeToggle.addEventListener('change', () => {
                const newTheme = themeToggle.checked ? 'dark' : 'light';
                body.setAttribute('data-theme', newTheme);
                localStorage.setItem('ajaySmartTheme', newTheme);
            });

            loadTheme();

            function showView(viewName) {
                Object.values(views).forEach(view => view.classList.remove('active'));
                views[viewName].classList.add('active');
                document.querySelector('.container').scrollTop = 0;
            }

            function saveNotes() {
                localStorage.setItem('ajaySmartNotes', JSON.stringify(notes));
            }

            function saveCategories() {
                localStorage.setItem('ajaySmartCategories', JSON.stringify(categories));
            }

            function populateCategoryDropdowns() {
                const selectElements = [
                    document.getElementById('note-category'),
                    document.getElementById('edit-note-category')
                ];

                selectElements.forEach(select => {
                    select.innerHTML = '<option value="">Select a category</option>';
                    const sortedCategories = [...new Set(categories)].sort((a, b) => a.localeCompare(b));
                    sortedCategories.forEach(category => {
                        const option = document.createElement('option');
                        option.value = category;
                        option.textContent = category;
                        select.appendChild(option);
                    });
                });
            }

            populateCategoryDropdowns();

            document.getElementById('create-note-btn').addEventListener('click', () => {
                document.getElementById('note-title').value = '';
                document.getElementById('note-content').value = '';
                document.getElementById('note-category').value = '';
                document.getElementById('new-category-input').value = '';
                populateCategoryDropdowns();
                showView('createNote');
            });

            document.getElementById('manage-notes-btn').addEventListener('click', () => {
                renderNotesList();
                showView('manageNotes');
            });

            document.querySelectorAll('.btn-go-back').forEach(button => {
                button.addEventListener('click', (event) => {
                    const targetView = event.target.dataset.targetView;
                    showView(targetView);
                });
            });

            document.getElementById('create-new-category-btn').addEventListener('click', () => {
                const newCategoryInput = document.getElementById('new-category-input');
                const newCategoryName = newCategoryInput.value.trim();
                if (newCategoryName && !categories.includes(newCategoryName)) {
                    categories.push(newCategoryName);
                    saveCategories();
                    populateCategoryDropdowns();
                    document.getElementById('note-category').value = newCategoryName;
                    newCategoryInput.value = '';
                } else if (categories.includes(newCategoryName)) {
                    alert('Category already exists!');
                    document.getElementById('note-category').value = newCategoryName;
                    newCategoryInput.value = '';
                }
            });

            document.getElementById('save-note-btn').addEventListener('click', () => {
                const titleInput = document.getElementById('note-title');
                const contentInput = document.getElementById('note-content');
                const categorySelect = document.getElementById('note-category');

                const title = titleInput.value.trim();
                const content = contentInput.value.trim();
                const category = categorySelect.value || 'Uncategorized';

                if (!title) {
                    alert('Note title cannot be empty!');
                    titleInput.focus();
                    return;
                }
                if (!content) {
                    alert('Note content cannot be empty!');
                    contentInput.focus();
                    return;
                }

                const newNote = {
                    id: Date.now().toString(),
                    title: title,
                    content: content,
                    category: category,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };

                notes.unshift(newNote);
                saveNotes();

                alert('Note saved successfully!');
                titleInput.value = '';
                contentInput.value = '';
                categorySelect.value = '';
                showView('home');
            });

            function renderNotesList() {
                const notesListContainer = document.getElementById('notes-list');
                const noNotesMessage = document.getElementById('no-notes-message');
                notesListContainer.innerHTML = '';

                if (notes.length === 0) {
                    noNotesMessage.style.display = 'block';
                    return;
                } else {
                    noNotesMessage.style.display = 'none';
                }

                notes.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));

                notes.forEach(note => {
                    const listItem = document.createElement('li');
                    listItem.classList.add('note-list-item');
                    listItem.dataset.noteId = note.id;

                    const dateObj = new Date(note.updatedAt);
                    const formattedDate = dateObj.toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' });
                    const formattedTime = dateObj.toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit' });

                    listItem.innerHTML = `
                        <h3>${note.title}</h3>
                        <p>${note.content.substring(0, 100)}${note.content.length > 100 ? '...' : ''}</p>
                        <div class="note-date">Updated: ${formattedDate} at ${formattedTime}</div>
                        <div class="note-category">Category: ${note.category}</div>
                    `;
                    notesListContainer.appendChild(listItem);

                    listItem.addEventListener('click', () => {
                        currentNoteId = note.id;
                        renderNoteDetails(note);
                        showView('noteDetails');
                    });
                });
            }

            function renderNoteDetails(note) {
                document.getElementById('detail-note-title').textContent = note.title;
                document.getElementById('detail-note-content').textContent = note.content;
                document.getElementById('detail-note-category').textContent = note.category;
                const dateObj = new Date(note.updatedAt);
                document.getElementById('detail-note-date').textContent = dateObj.toLocaleString();
            }

            document.getElementById('edit-note-btn').addEventListener('click', () => {
                const noteToEdit = notes.find(n => n.id === currentNoteId);
                if (noteToEdit) {
                    document.getElementById('edit-note-title').value = noteToEdit.title;
                    document.getElementById('edit-note-content').value = noteToEdit.content;
                    populateCategoryDropdowns();
                    document.getElementById('edit-note-category').value = noteToEdit.category;
                    showView('editNote');
                }
            });

            document.getElementById('copy-note-btn').addEventListener('click', () => {
                const noteToCopy = notes.find(n => n.id === currentNoteId);
                if (noteToCopy) {
                    const fullContent = `Title: ${noteToCopy.title}\nCategory: ${noteToCopy.category}\n\n${noteToCopy.content}\n\nLast Updated: ${new Date(noteToCopy.updatedAt).toLocaleString()}`;
                    navigator.clipboard.writeText(fullContent)
                        .then(() => {
                            const btn = document.getElementById('copy-note-btn');
                            const originalText = btn.textContent;
                            btn.textContent = 'Copied!';
                            setTimeout(() => btn.textContent = originalText, 1500);
                        })
                        .catch(err => {
                            console.error('Failed to copy text: ', err);
                            alert('Failed to copy note. Please try again.');
                        });
                }
            });

            document.getElementById('share-note-btn').addEventListener('click', () => {
                const noteToShare = notes.find(n => n.id === currentNoteId);
                if (noteToShare) {
                    if (navigator.share) {
                        navigator.share({
                            title: noteToShare.title,
                            text: `${noteToShare.content}\n\n(Category: ${noteToShare.category} | Updated: ${new Date(noteToShare.updatedAt).toLocaleString()})`,
                        })
                        .then(() => console.log('Note shared successfully'))
                        .catch((error) => console.error('Error sharing note:', error));
                    } else {
                        alert('Web Share API is not supported in your browser.');
                    }
                }
            });

            document.getElementById('download-note-btn').addEventListener('click', () => {
                const noteToDownload = notes.find(n => n.id === currentNoteId);
                if (noteToDownload) {
                    const filename = `${noteToDownload.title.replace(/[^a-z0-9]/gi, '_')}.txt`;
                    const content = `Title: ${noteToDownload.title}\nCategory: ${noteToDownload.category}\nLast Updated: ${new Date(noteToDownload.updatedAt).toLocaleString()}\n\n${noteToDownload.content}`;
                    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }
            });

            document.getElementById('delete-note-btn').addEventListener('click', () => {
                if (confirm('Are you sure you want to delete this note? This action cannot be undone.')) {
                    notes = notes.filter(n => n.id !== currentNoteId);
                    saveNotes();
                    alert('Note deleted successfully!');
                    renderNotesList();
                    showView('manageNotes');
                    currentNoteId = null;
                }
            });

            document.getElementById('update-note-btn').addEventListener('click', () => {
                const editedTitle = document.getElementById('edit-note-title').value.trim();
                const editedContent = document.getElementById('edit-note-content').value.trim();
                const editedCategory = document.getElementById('edit-note-category').value || 'Uncategorized';

                if (!editedTitle) {
                    alert('Note title cannot be empty!');
                    document.getElementById('edit-note-title').focus();
                    return;
                }
                if (!editedContent) {
                    alert('Note content cannot be empty!');
                    document.getElementById('edit-note-content').focus();
                    return;
                }

                const noteIndex = notes.findIndex(n => n.id === currentNoteId);
                if (noteIndex !== -1) {
                    notes[noteIndex].title = editedTitle;
                    notes[noteIndex].content = editedContent;
                    notes[noteIndex].category = editedCategory;
                    notes[noteIndex].updatedAt = new Date().toISOString();
                    saveNotes();
                    alert('Note updated successfully!');
                    renderNoteDetails(notes[noteIndex]);
                    showView('noteDetails');
                }
            });

            showView('home');
        });
    </script>
</body>
</html>